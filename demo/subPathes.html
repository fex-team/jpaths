<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>jpaths</title>
    <style stylesheet="text/css">
        svg {
            width: 500px;
            height: 500px;
            border: 1px solid #ccc;
        }
        svg path {
            position: relative;
        }
        svg path:nth-child(odd) {
            fill: none;
            stroke: blue;
        }
        svg path:nth-child(even) {
            fill: none;
            stroke: red;
        }
        svg path:first-child {
            fill: none;
            stroke-width: 10px;
            stroke: #ccc;
        }
    </style>
</head>
<body>
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="svg">

</svg>   
</body>
<script src="../lib/pathseg.js"></script>
<script src="../lib/require.js"></script>
<script>

define('start', function(require) {

    var jpaths = require('../src/jpaths');
    var path;
    var svg = document.getElementById('svg');
    var i = 1;

    function init(pathdata) {
        var obj = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        var initpath;

        path = jpaths(pathdata);//创建jpaths对象

        initpath = path.toString('%n');//获取jpaths对象的path数据
        obj.setAttribute('d', initpath);
        svg.appendChild(obj);//测试初始时的path数据

        console.log('初始路径：\n', initpath);
    }

    function append(pathdata) {
        var obj = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        var totalpath;

        path.append(pathdata);//调用jpaths对象的append()方法
        totalpath = path.toString();//获取最新的path数据

        obj.setAttribute('d', totalpath);
        svg.appendChild(obj);//测试最新的path数据

        console.log(i++ + ') path.append("' + pathdata + '")之后的路径：\n');
        console.log(path.toString('%n'));
    }

    function test(pathdata) {
        init(pathdata);

        var subPathes = path.subPathes();

        subPathes.forEach(function(sub, i) {
            var obj = document.createElementNS('http://www.w3.org/2000/svg', 'path');

            obj.setAttribute('d', sub.path);
            svg.appendChild(obj);

            console.log('第' + i + '条路径：\n');
            console.log(sub.path);
        });
    }

    test('M50,50l40 50v50h100a40 50 0 1 0 40 50c100 100 250 10 -150 100q50 60 80 70t80,90');

    window.path = path;
});
require(['start'], function() {
   
});
</script>
</html>