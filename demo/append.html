<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>jpaths</title>
    <style stylesheet="text/css">
        svg {
            width: 500px;
            height: 500px;
            border: 1px solid #ccc;
        }
        svg path {
            position: relative;
        }
        svg path:nth-child(odd){
            fill: none;
            stroke: blue;
        }
        svg path:nth-child(even){
            fill: none;
            stroke: red;
        }
    </style>
</head>
<body>
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="svg">

</svg>   
</body>
<script src="../lib/pathseg.js"></script>
<script src="../lib/require.js"></script>
<script>

define('start', function(require) {

    var jpaths = require('../src/jpaths');
    var path;
    var p = {};
    var svg = document.getElementById('svg');
    var i = 1;

    function init(pathdata) {
        var obj = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        var initpath;

        path = jpaths(pathdata);//创建jpaths对象

        initpath = path.toString('%n');//获取jpaths对象的path数据
        obj.setAttribute('d', initpath);
        svg.appendChild(obj);//测试初始时的path数据

        console.log('初始路径：\n', initpath);
    }

    function append(pathdata) {
        var obj = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        var totalpath;

        path.append(pathdata);//调用jpaths对象的append()方法
        totalpath = path.toString();//获取最新的path数据

        obj.setAttribute('d', totalpath);
        svg.appendChild(obj);//测试最新的path数据

        console.log(i++ + ') path.append("' + pathdata + '")之后的路径：\n');
        console.log(path.toString('%n'));
    }

    init('M50,50l40 50');

    var paths = ['v50', 
            'm 20 30',
            'h100', 
            ['a', 40, 50, 0, 1, 0, 40, 40], 
            'l40, 60',
            'c100,100 250,100 150,100'];

    paths.forEach(function(item, index) {
        setTimeout(function() {
            append(item);
        }, index * 400);
    });

    p.append = append;
    window.p = p;//用于外部操作演示
    window.path = path;
});
require(['start'], function() {
   
});
</script>
</html>